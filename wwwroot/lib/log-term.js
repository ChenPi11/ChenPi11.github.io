"use strict";import{getPreferredTermTheme}from"./term-themes.js";import{addThemeChangeCallback}from"./theme-loader.js";$((function(){const terminalContainer=$("#terminal");const terminal=new Terminal({theme:getPreferredTermTheme(),fontFamily:"Meslo, monospace",fontSize:14,scrollback:9999999});const fitAddon=new FitAddon.FitAddon;terminal.loadAddon(fitAddon);terminal.open(terminalContainer.get(0));fitAddon.fit();const buildLogUrl="/buildlog.txt";fetch(buildLogUrl).then((response=>{if(!response.ok){throw new Error(response.statusText)}response.text().then((text=>{const lines=text.split("\n");for(let i=0;i<lines.length;i++){terminal.writeln(lines[i])}}))})).catch((error=>{console.error("Error while reading file: ",error);terminal.writeln(`[31mError while fetching \`${buildLogUrl}\`: ${error.message}[0m`);let stack=error.stack.split("\n");for(let i=1;i<stack.length;i++){stack[i]=stack[i].trim();terminal.writeln(`[31m\t${stack[i]}[0m`)}}));$(window).on("resize",(()=>fitAddon.fit()));$(document).css("overflow","hidden");function onThemeChange(_){terminal.options.theme=getPreferredTermTheme()}addThemeChangeCallback(onThemeChange)}));
