import{listTermThemes,getTermTheme,getPreferredTermTheme,getPreferredTermThemeName,setPreferredTermTheme,registerTerminal}from"/lib/term-themes.js";import{getTheme,addThemeChangeCallback}from"/lib/theme-loader.js";import{listCookies,setCookie,getCookie,updateCookieDays,eraseCookie}from"/lib/cookie.js";for(const[name,_]of listTermThemes()){const option=$(`<label>\n                        <input type="radio" name="theme" value="${name}">\n                        ${name}\n                        </label>`);$("#theme-option").append(option)}function updateTermThemeSetting(){$(`input[value="${getPreferredTermThemeName()}"]`).prop("checked",true);if(getTheme()=="dark"){$("#theme-preview-tag").html("æš—è‰²ä¸»é¢˜ä¸‹ç»ˆç«¯çš„ä¸»é¢˜")}else{$("#theme-preview-tag").html("äº®è‰²ä¸»é¢˜ä¸‹ç»ˆç«¯çš„ä¸»é¢˜")}}let onThemeChanged=function(){};$(`input[name="theme"]`).on("change",(function(){setPreferredTermTheme($(this).val());const theme=$(`input[name="theme"]:checked`).val();term.options.theme=getTermTheme(theme);onThemeChanged()}));const term=new Terminal({fontFamily:"Meslo, monospace",theme:getPreferredTermTheme(),fontSize:14,scrollback:9999999});registerTerminal(term);term.resize(30,12);term.open($("#term-preview").get(0));term.writeln("[0må‰æ™¯è‰²[0m");term.writeln("[30mé»‘è‰²[0m\t[1;30mäº®é»‘è‰²[0m\t[40mé»‘è‰²èƒŒæ™¯[0m");term.writeln("[31mçº¢è‰²[0m\t[1;31mäº®çº¢è‰²[0m\t[41mçº¢è‰²èƒŒæ™¯[0m");term.writeln("[32mç»¿è‰²[0m\t[1;32mäº®ç»¿è‰²[0m\t[42mç»¿è‰²èƒŒæ™¯[0m");term.writeln("[33mé»„è‰²[0m\t[1;33mäº®é»„è‰²[0m\t[43mé»„è‰²èƒŒæ™¯[0m");term.writeln("[34mè“è‰²[0m\t[1;34mäº®è“è‰²[0m\t[44mè“è‰²èƒŒæ™¯[0m");term.writeln("[35mç´«è‰²[0m\t[1;35mäº®ç´«è‰²[0m\t[45mç´«è‰²èƒŒæ™¯[0m");term.writeln("[36mé’è‰²[0m\t[1;36mäº®é’è‰²[0m\t[46mé’è‰²èƒŒæ™¯[0m");term.writeln("[37mç™½è‰²[0m\t[1;37mäº®ç™½è‰²[0m\t[47mç™½è‰²èƒŒæ™¯[0m");term.writeln("ïŒš ïŒ› ïŒœ ïŒ ïŒ ïŒŸ");$(".keep-theme-settings").on("click",(function(){const toggleButton=$("#keep-theme-button");toggleButton.toggleClass("active");let keepThemeSettings=toggleButton.hasClass("active");if(keepThemeSettings){setCookie("keep-theme-settings","true",365)}else{setCookie("keep-theme-settings","false");eraseCookie("keep-theme-settings")}const needKeeps=["color-scheme","term-theme","term-theme-dark"];for(const needKeep of needKeeps){updateCookieDays(needKeep,keepThemeSettings?365:7)}}));$((function(){const keepThemeSettings=getCookie("keep-theme-settings")=="true";if(keepThemeSettings){$(".keep-theme-settings").addClass("active")}}));function updateCookieList(){const cookieList=$("#cookie-list");cookieList.empty();cookieList.append("<h2>Cookies</h2>");for(const[key,value]of listCookies()){const listItem=$(`<div class="list-item">\n                                <div class="item-content">\n                                    <span class="item-name">${key}</span>\n                                    <span class="item-value">${value}</span>\n                                </div>\n                            </div>`);cookieList.append(listItem)}}$(updateTermThemeSetting);$(updateCookieList);onThemeChanged=updateCookieList;addThemeChangeCallback(updateCookieList);addThemeChangeCallback(updateTermThemeSetting);
